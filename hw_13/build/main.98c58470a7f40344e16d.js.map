{"version":3,"sources":["webpack:///./js_components/main.js","webpack:///./tamplates/image_list.hbs"],"names":["refs","input","document","querySelector","gallery","actions","curentQuerry","searchImages","querryImage","this","innerHTML","infScrollInstance","pageIndex","loadNextPage","InfiniteScroll","path","history","responseType","scrollThreshold","on","response","posts","JSON","parse","hits","length","markup","map","post","galleryTemplate","join","proxyEL","createElement","appendItems","querySelectorAll","addEventListener","debounce","e","target","value","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","tags","likes","views","comments","downloads"],"mappings":"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","file":"main.98c58470a7f40344e16d.js","sourcesContent":["// import getAPI from './apiService.js';\r\nimport {\r\n  debounce\r\n} from 'lodash';\r\nimport galleryTemplate from '../tamplates/image_list.hbs';\r\nimport InfiniteScroll from 'infinite-scroll';\r\n// import PNotify from 'pnotify/dist/es/PNotify.js';\r\n\r\nconst refs = {\r\n  input: document.querySelector('.search-form'),\r\n  gallery: document.querySelector('#gallery'),\r\n};\r\n\r\nconst actions = {\r\n  curentQuerry: '',\r\n  searchImages(querryImage) {\r\n    if (!querryImage) return;\r\n    if (querryImage !== this.curentQuerry) {\r\n      this.curentQuerry = querryImage;\r\n      refs.gallery.innerHTML = '';\r\n      infScrollInstance.pageIndex = 1;\r\n      infScrollInstance.loadNextPage();\r\n    }\r\n  },\r\n};\r\n\r\nconst infScrollInstance = new InfiniteScroll(refs.gallery, {\r\n  path() {\r\n    return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${actions.curentQuerry}&page=${this.pageIndex}&per_page=12&key=15351993-20fbe64b80ff3985c977b1876`;\r\n  },\r\n  history: false,\r\n  responseType: 'text',\r\n  scrollThreshold: 2000,\r\n});\r\n\r\ninfScrollInstance.on('load', response => {\r\n  const posts = JSON.parse(response);\r\n  if (posts.hits.length < 1) {\r\n    // window.scrollBy(0, -40);\r\n    // return PNotify.error({\r\n    //   text: 'Sorry, we could not find anything',\r\n    //   delay: 2000,\r\n    // });       временно решение пока не заработает PNotify\r\n\r\n    // debounce(alert('Can\\'t load items...'), 2000)\r\n  }\r\n  const markup = posts.hits.map(post => galleryTemplate(post)).join('');\r\n  //   const markup = posts.hits.reduce((string, post) => string + galleryTemplate(post), '')\r\n  const proxyEL = document.createElement('div');\r\n  proxyEL.innerHTML = markup;\r\n  infScrollInstance.appendItems(proxyEL.querySelectorAll('.photo-card'));\r\n});\r\n\r\nrefs.input.addEventListener(\r\n  'input',\r\n  debounce(e => {\r\n    // e.preventDefault()\r\n    actions.searchImages(e.target.value);\r\n  }, 500),\r\n);\r\n\r\n// document.addEventListener('DOMContentLoaded', () => {\r\n//   return infScrollInstance.loadNextPage();\r\n// });\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<div class=\\\"photo-card\\\"><img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":34},\"end\":{\"line\":1,\"column\":50}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.tags || (depth0 != null ? depth0.tags : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":57},\"end\":{\"line\":1,\"column\":65}}}) : helper)))\n    + \"\\\" />\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\"><i class=\\\"material-icons\\\">thumb_up</i>\"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":68},\"end\":{\"line\":3,\"column\":77}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\"><i class=\\\"material-icons\\\">visibility</i>\"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":70},\"end\":{\"line\":5,\"column\":79}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\"><i class=\\\"material-icons\\\">comment</i>\"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":67},\"end\":{\"line\":7,\"column\":80}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\"><i class=\\\"material-icons\\\">cloud_download</i>\"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":74},\"end\":{\"line\":9,\"column\":87}}}) : helper)))\n    + \"\\r\\n        </p>\\r\\n    </div>\\r\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}